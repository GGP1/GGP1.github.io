<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><link rel=icon href=/favicon.ico type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:url" content="https://gastonpalomeque.com/posts/wazuh_performance_enhancements/"><meta property="og:site_name" content="Gastón Palomeque"><meta property="og:title" content="Delving into Wazuh's server performance enhancements"><meta property="og:description" content="In this post, we will go through real-world performance optimizations introduced to Wazuh’s server 4.13.0 version, achieving significant reductions in time and resources consumption up to 95%!
Let’s dive into the issues and how we fixed them.
Identifying bottlenecks Diagnosing performance issues begins with a thorough review of the system architecture.
Depending on the application’s requirements, you might find yourself working on different parts of the system, but the most common critical part of a system’s performance is usually the database."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-07-27T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-27T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Batching"><meta property="article:tag" content="Connection Pooling"><meta property="article:tag" content="Caching"><meta property="article:tag" content="Networking"><meta property="article:tag" content="Scaling"><meta name=twitter:card content="summary"><meta name=twitter:title content="Delving into Wazuh's server performance enhancements"><meta name=twitter:description content="In this post, we will go through real-world performance optimizations introduced to Wazuh’s server 4.13.0 version, achieving significant reductions in time and resources consumption up to 95%!
Let’s dive into the issues and how we fixed them.
Identifying bottlenecks Diagnosing performance issues begins with a thorough review of the system architecture.
Depending on the application’s requirements, you might find yourself working on different parts of the system, but the most common critical part of a system’s performance is usually the database."><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#000;--text-secondary-color:#6c757d;--text-link-color:#4d7fb5;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#4d7fb5;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--text-link-color-dark:#ffffff;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color)!important}body::-webkit-scrollbar{height:0;width:8px;background-color:var(--background-color)}::-webkit-scrollbar-track{border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background:#b0b0b0;outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><meta name=description content><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-6/all-6.4.2.js></script><title>Delving into Wazuh's server performance enhancements | Gastón Palomeque</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><script>var prevScrollPos=window.pageYOffset;window.addEventListener("scroll",function(){let s=document.getElementById("profileHeader"),t=window.pageYOffset,n=!1,o=!0,i=o?prevScrollPos>t:t>0;i?s.classList.add("showHeaderOnTop"):n=!0,t===0&&(n=!0),n&&s.classList.remove("showHeaderOnTop"),prevScrollPos=t})</script><header id=profileHeader><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/favicon.ico width=30 height=30 class="d-inline-block align-top"></a><div><input id=search autocomplete=off class="form-control mr-sm-2 d-none d-md-block" placeholder=Search aria-label=Search oninput=searchOnChange(event)></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation">
<svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text d-block d-md-none"><div class=nav-link><input id=search autocomplete=off class="form-control mr-sm-2" placeholder=Search aria-label=Search oninput=searchOnChange(event)></div></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#experience aria-label=experience>Experience</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#projects aria-label=projects>Projects</a></li><li class="nav-item navbar-text"><a class=nav-link href=/posts/ title>Posts</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle>
<svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Delving into Wazuh's server performance enhancements</h1><div class=text-center>Jul 27, 2025</div></div><div class=featured-image><img class="img-fluid mx-auto d-block" src=/images/performance_enhancements/auth_requests.png alt="Delving into Wazuh's server performance enhancements"></div><article class="page-content p-2"><p>In this post, we will go through real-world performance optimizations introduced to Wazuh&rsquo;s server 4.13.0 version, achieving significant reductions in time and resources consumption up to <strong>95%</strong>!</p><p>Let&rsquo;s dive into the issues and how we fixed them.</p><h3 id=identifying-bottlenecks>Identifying bottlenecks</h3><p>Diagnosing performance issues begins with a thorough review of the system architecture.</p><p>Depending on the application&rsquo;s requirements, you might find yourself working on different parts of the system, but the most common critical part of a system&rsquo;s performance is usually the database.</p><p>In the Wazuh server, the database uses the highest transaction isolation level available (serializable) to provide better data consistency, with the trade-off of being slower to process queries due to longer lock times and increased contention between transactions.</p><blockquote><p><em>Serializable</em> means transactions are executed synchronously, one after the other. There can&rsquo;t be two transaction executing at the same time.</p><p>See the <a href=./mastering_sql_with_go_p2.md#isolation-levels>Isolation levels</a> section of one of the previous posts for more details on transaction levels.</p></blockquote><div class=mb-4 align=center><img align=middle src=/images/performance_enhancements/bottleneck.jpg height=300 width=500 alt=Bottleneck></div><p>On top of this, the communication with the database uses the UDP protocol, which is technically faster than TCP because it does not provide data recovery mechanisms, but that suffers from a significant limitation: packet sizes can&rsquo;t exceed 65kB, meaning that retrieving bigger data sets requires multiple round-trips.</p><p>We will see later that this plays a big role on many of the decisions we took on how to optimize the server performance.</p><h3 id=improving-queries>Improving queries</h3><p><a href=https://github.com/wazuh/wazuh/pull/29363><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>The first major issue we were facing is that the database was locked executing too much queries to perform a single operation: get the number of agents with each connection and group configuration status.</p><p>The result would be something like this</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;connection_status&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;active&#34;</span>: <span style=color:#d19a66>15</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;disconnected&#34;</span>: <span style=color:#d19a66>4</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;never_connected&#34;</span>: <span style=color:#d19a66>2</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;pending&#34;</span>: <span style=color:#d19a66>2</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;group_config_status&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;synced&#34;</span>: <span style=color:#d19a66>20</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;not_synced&#34;</span>: <span style=color:#d19a66>3</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And to calculate that, we were retrieving all agents and their status fields to then iterate over them and count each occurence.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#c678dd>SELECT</span> <span style=color:#e06c75>id</span> <span style=color:#c678dd>AS</span> <span style=color:#98c379>&#39;id&#39;</span>, <span style=color:#e06c75>connection_status</span> <span style=color:#c678dd>AS</span> <span style=color:#98c379>&#39;status&#39;</span>, <span style=color:#e06c75>group_config_status</span> <span style=color:#c678dd>AS</span> <span style=color:#98c379>&#39;group_config_status&#39;</span> <span style=color:#c678dd>FROM</span> <span style=color:#e06c75>agent</span> <span style=color:#c678dd>ORDER</span> <span style=color:#c678dd>BY</span> <span style=color:#e06c75>id</span> <span style=color:#c678dd>ASC</span> <span style=color:#c678dd>LIMIT</span> <span style=color:#56b6c2>&lt;</span><span style=color:#c678dd>limit</span><span style=color:#56b6c2>&gt;</span> <span style=color:#c678dd>OFFSET</span> <span style=color:#56b6c2>&lt;</span><span style=color:#c678dd>offset</span><span style=color:#56b6c2>&gt;</span>
</span></span></code></pre></div><p><code>LIMIT</code> and <code>OFFSET</code> clauses are used to paginate over the list of agents, which the server does in chunks of 500 agents at the time. The chunk size is quite low because of the UDP limitation we mentioned earlier in <a href=#identifying-shortcomings>Identifying shortcomings</a>.</p><p>There were no issues noticeable in most environments, since the number of agents is typically below 500 and there is only one transaction required. However, on bigger environments with thousands of agents, it was locking the database for extended periods of time.</p><p>To overcome this, we used the <code>GROUP BY</code> SQL clause to let the much faster and efficient database engine do the counting.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#c678dd>SELECT</span> <span style=color:#e06c75>connection_status</span> <span style=color:#c678dd>AS</span> <span style=color:#98c379>&#39;status&#39;</span> <span style=color:#c678dd>FROM</span> <span style=color:#e06c75>agent</span> <span style=color:#c678dd>GROUP</span> <span style=color:#c678dd>BY</span> <span style=color:#e06c75>connection_status</span> <span style=color:#c678dd>ORDER</span> <span style=color:#c678dd>BY</span> <span style=color:#e06c75>id</span> <span style=color:#c678dd>ASC</span> <span style=color:#c678dd>LIMIT</span> <span style=color:#d19a66>4</span> <span style=color:#c678dd>OFFSET</span> <span style=color:#d19a66>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>SELECT</span> <span style=color:#e06c75>group_config_status</span> <span style=color:#c678dd>AS</span> <span style=color:#98c379>&#39;group_config_status&#39;</span> <span style=color:#c678dd>FROM</span> <span style=color:#e06c75>agent</span> <span style=color:#c678dd>GROUP</span> <span style=color:#c678dd>BY</span> <span style=color:#e06c75>group_config_status</span> <span style=color:#c678dd>ORDER</span> <span style=color:#c678dd>BY</span> <span style=color:#e06c75>id</span> <span style=color:#c678dd>ASC</span> <span style=color:#c678dd>LIMIT</span> <span style=color:#d19a66>2</span> <span style=color:#c678dd>OFFSET</span> <span style=color:#d19a66>0</span>
</span></span></code></pre></div><blockquote><p>Limits <code>4</code> and <code>2</code> are used to prevent the database client from trying to get more items after the first transaction. Since both statuses are enumerators, we already know the number of items in advance.</p></blockquote><p>After this change, the number of transactions required to obtain the information in an environment with 50,000 agents went from <strong>102</strong> to just <strong>6</strong>, a <strong>94.1176% decrease</strong>.</p><blockquote><p>4 of the 6 queries are added by the database client, only two are necessary to get the data.</p></blockquote><details><summary>Before</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] main.c:339 at run_dealer(): DEBUG: New client connected (40).
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select count(*) from (select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent)
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select count(*) from agent order by id asc
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 0
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 1000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 1500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 2000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 2500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 3000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 3500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 4000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 4500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 5000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 5500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 6000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 6500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 7000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 7500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 8000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 8500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 9000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 9500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 10000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 10500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 11000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 11500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 12000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 12500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 13000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 13500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 14000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 14500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 15000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 15500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 16000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 16500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 17000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 17500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 18000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 18500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 19000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 19500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 20000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 20500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 21000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 21500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 22000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 22500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 23000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 23500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 24000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 24500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 25000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 25500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 26000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 26500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 27000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 27500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 28000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 28500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 29000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 29500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 30000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 30500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 31000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 31500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 32000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 32500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 33000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 33500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 34000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 34500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 35000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 35500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 36000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 36500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 37000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 37500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 38000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 38500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 39000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 39500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 40000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 40500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 41000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 41500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 42000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 42500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 43000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 43500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 44000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 44500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 45000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 45500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 46000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 46500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 47000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 47500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 48000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 48500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 49000
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sql select id as &#39;id&#39;,connection_status as &#39;status&#39;,group_config_status as &#39;group_config_status&#39; from agent order by id asc limit 500 offset 49500
</span></span><span style=display:flex><span>2025/04/24 15:43:02 wazuh-db[28844] main.c:401 at run_worker(): DEBUG: Client 40 disconnected.
</span></span></code></pre></div></details><details><summary>After</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] main.c:352 at run_dealer(): DEBUG: New client connected (43).
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] wdb_parser.c:940 at wdb_parse(): DEBUG: Global query: sql select count(*) from (select connection_status as &#39;status&#39; from agent)
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] wdb_parser.c:940 at wdb_parse(): DEBUG: Global query: sql select count(*) from agent order by id asc  
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] wdb_parser.c:940 at wdb_parse(): DEBUG: Global query: sql select connection_status as &#39;status&#39; from agent group by connection_status order by id asc limit 4 offset 0
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] main.c:414 at run_worker(): DEBUG: Client 43 disconnected.
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] main.c:352 at run_dealer(): DEBUG: New client connected (21).
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] wdb_parser.c:940 at wdb_parse(): DEBUG: Global query: sql select count(*) from (select group_config_status as &#39;group_config_status&#39; from agent)
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] wdb_parser.c:940 at wdb_parse(): DEBUG: Global query: sql select count(*) from agent order by id asc  
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] wdb_parser.c:940 at wdb_parse(): DEBUG: Global query: sql select group_config_status as &#39;group_config_status&#39; from agent group by group_config_status order by id asc limit 2 offset 0
</span></span><span style=display:flex><span>2025/04/30 16:31:28 wazuh-db[5211] main.c:414 at run_worker(): DEBUG: Client 21 disconnected.
</span></span></code></pre></div></details><br><h3 id=unifying-requests>Unifying requests</h3><p><a href=https://github.com/wazuh/wazuh/pull/29589><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>One of Wazuh&rsquo;s main dashboards displays widgets containing the number of agents in each group, with each operating system and connection status.</p><p><img src=/images/performance_enhancements/widgets.png alt="Agent widgets" title="Agent widgets"></p><p>To get this information, the dashboard plugin was performing three different requests to the API. Each request requires to be authenticated, validated and uses a different connection to the database.</p><p>The fix we applied in this case was to create an endpoint that returned all the counters together, so that the client needed just one request to render the widgets. Just like that, we saved a considerable amount of computing power and memory allocations.</p><h3 id=implementing-smarter-caching>Implementing smarter caching</h3><p><a href=https://github.com/wazuh/wazuh/pull/29406><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>All requests to the Wazuh API require to be authenticated, and that authentication is done using a role-based access control mechanism (<a href=https://documentation.wazuh.com/current/user-manual/user-administration/rbac.html>RBAC</a>). To enforce its policies, it is essential to get the resources that will be accessed and match them against the user&rsquo;s permissions.</p><p>Many of these resources were cached on the scope of the request, but the cache wouldn&rsquo;t work for different requests accessing the same information. This was causing the server to go and read the contents of a file for every ruleset request.</p><p>Given that ruleset files do not currently (as of 4.13.0) support hot-reloading, we could just have a global cache that &ldquo;freezes&rdquo; the ruleset for 10 seconds. It is enough time to use the memory when we receive multiple requests in a row, but not as much in case they are modified by the user and requested again.</p><p>Introducing a simple TTL in-memory cache saved us many unnecessary system calls.</p><h3 id=reducing-time-complexity>Reducing time complexity</h3><p><img src=/images/performance_enhancements/time_complexity.jpeg alt="Time complexity" title="Time complexity"></p><p><a href=https://github.com/wazuh/wazuh/pull/30931><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>The endpoint <code>PUT /agents/restart</code> was causing timeouts and our performance tests to fail due to a critical logic mistake in its controller function.</p><p>The main issue lied in the <a href=https://github.com/wazuh/wazuh/pull/30931/files#diff-8a6dae46350a78b58703fdd662abc0544b50294a50755a8931c6a3ec8ac0cd69L266>following line</a>, which calculates a list of agents to restart. Only active agents are added to the list, since we can&rsquo;t restart disconnected or pending ones.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#7f848e># agents: array containing all agents</span>
</span></span><span style=display:flex><span><span style=color:#7f848e># non_active_agents: array containing agents whose status is not &#39;active&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>eligible_agents</span> <span style=color:#56b6c2>=</span> [<span style=color:#e06c75>agent</span> <span style=color:#c678dd>for</span> <span style=color:#e06c75>agent</span> <span style=color:#56b6c2>in</span> <span style=color:#e06c75>agents</span> <span style=color:#c678dd>if</span> <span style=color:#e06c75>agent</span> <span style=color:#56b6c2>not</span> <span style=color:#56b6c2>in</span> <span style=color:#e06c75>non_active_agents</span>] <span style=color:#c678dd>if</span> <span style=color:#e06c75>non_active_agents</span> <span style=color:#c678dd>else</span> <span style=color:#e06c75>agents</span>
</span></span></code></pre></div><p>If all agents are disconnected this has a time complexity of <strong>O(n²)</strong> and, in an environment with 50,000 agents, it would take <strong>27 seconds</strong> to complete (even though no actual restart took place, because no agent was active).</p><p>In contrast, after the changes, the same scenario has a time complexity of <strong>O(n)</strong> and takes <strong>600 milliseconds</strong>, a <strong>97.7778% decrease</strong>!</p><p>This drastic difference is exacerbated by the fact that all of them are inactive, but in real environments, specially those who have sporadic agents (that is, they spawn agents to perform certain tasks and then kill them), this was causing response times to sky rocket due to a very simple operation.</p><p>The solution to this problem was to iterate over the list of agents once and building the inactive, eligible and not_found lists in the same for loop.</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#c678dd>for</span> <span style=color:#e06c75>agent_id</span> <span style=color:#56b6c2>in</span> <span style=color:#e06c75>agent_list</span>:
</span></span><span style=display:flex><span>  <span style=color:#c678dd>if</span> <span style=color:#e06c75>agent_id</span> <span style=color:#56b6c2>not</span> <span style=color:#56b6c2>in</span> <span style=color:#e06c75>system_agents</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>result</span><span style=color:#56b6c2>.</span><span style=color:#e06c75>add_failed_item</span>(<span style=color:#e06c75>id_</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>agent_id</span>, <span style=color:#e06c75>error</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>WazuhResourceNotFound</span>(<span style=color:#d19a66>1701</span>))
</span></span><span style=display:flex><span>      <span style=color:#c678dd>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#c678dd>if</span> <span style=color:#e06c75>agent_id</span> <span style=color:#56b6c2>not</span> <span style=color:#56b6c2>in</span> <span style=color:#e06c75>active_agents</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>result</span><span style=color:#56b6c2>.</span><span style=color:#e06c75>add_failed_item</span>(<span style=color:#e06c75>id_</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>agent_id</span>, <span style=color:#e06c75>error</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>WazuhError</span>(<span style=color:#d19a66>1707</span>))
</span></span><span style=display:flex><span>      <span style=color:#c678dd>continue</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>  <span style=color:#c678dd>try</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>send_restart_command</span>(<span style=color:#e06c75>agent_id</span>, <span style=color:#e06c75>active_agents</span>[<span style=color:#e06c75>agent_id</span>], <span style=color:#e06c75>wq</span>)
</span></span><span style=display:flex><span>      <span style=color:#e06c75>result</span><span style=color:#56b6c2>.</span><span style=color:#e06c75>affected_items</span><span style=color:#56b6c2>.</span><span style=color:#e06c75>append</span>(<span style=color:#e06c75>agent_id</span>)
</span></span><span style=display:flex><span>  <span style=color:#c678dd>except</span> <span style=color:#e06c75>WazuhException</span> <span style=color:#c678dd>as</span> <span style=color:#e06c75>e</span>:
</span></span><span style=display:flex><span>      <span style=color:#e06c75>result</span><span style=color:#56b6c2>.</span><span style=color:#e06c75>add_failed_item</span>(<span style=color:#e06c75>id_</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>agent_id</span>, <span style=color:#e06c75>error</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>e</span>)
</span></span></code></pre></div><blockquote><p>The pull request also introduces changes to the database query to filter by status to get only the active agents instead of all of them, the eligible list is known by elimination.</p></blockquote><details><summary>Before</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>2025/07/17 08:43:54 INFO: wazuh 172.18.0.1 &#34;PUT /agents/restart&#34; with parameters {} and body {} done in 27.334s: 200
</span></span></code></pre></div></details><details><summary>After</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>2025/07/17 09:32:30 INFO: wazuh 172.18.0.1 &#34;PUT /agents/restart&#34; with parameters {} and body {} done in 0.614s: 200
</span></span></code></pre></div></details><br><h3 id=avoiding-the-bottleneck>Avoiding the bottleneck</h3><p><a href=https://github.com/wazuh/wazuh/pull/29363><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>As we have previously mentioned in <a href=#identifying-shortcomings>Identifying shortcomings</a>, the communication with the database uses the UDP protocol which has a maximum packet size of 65kB.</p><p>This forces the communication of bigger data sets to be splitted into several smaller ones. While this is great to keep memory consumption low, the amount of roundtrips required to access information in big environments is not efficient at all time-wise.</p><p>For instance, with 50,000 agents the database is making 20 queries with different offsets to retrieve all the data.</p><p>To overcome this limitation, what we did is to get them from a different source, the <code>client.keys</code> file, which contains a log-structured list of agents IDs, their names and keys.</p><p>This approach is much faster and requires a single system call, with the trade-off of loading all the information to memory at once. However, given that we are talking about IDs which are 1-2 bytes long, this isn&rsquo;t really an issue.</p><p>Finally, there is one more relevant change we did in this pull request, and that was that the query was getting all agents IDs and their groups, even though the groups weren&rsquo;t used. So we fixed that as well.</p><details><summary>Before</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] main.c:339 at run_dealer(): DEBUG: New client connected (40).
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:0, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:2754, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:5462, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:8170, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:10843, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:13443, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:16043, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:18643, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:21243, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:23843, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:26443, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:29043, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:31643, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:34243, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:36843, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:39443, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:42043, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:44643, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:47243, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] wdb_parser.c:859 at wdb_parse(): DEBUG: Global query: sync-agent-groups-get {&#34;last_id&#34;:49843, &#34;condition&#34;:&#34;all&#34;}
</span></span><span style=display:flex><span>2025/04/23 20:24:56 wazuh-db[117264] main.c:401 at run_worker(): DEBUG: Client 40 disconnected.
</span></span></code></pre></div></details><details><summary>After</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>Single system call to the file `/var/ossec/etc/client.keys`
</span></span></code></pre></div></details><br><h3 id=database-communication-overhaul>Database communication overhaul</h3><p><a href=https://github.com/wazuh/wazuh/pull/29515><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>Many of the previous performance enhancements have been related to the communication protocol used. As we have seen, it&rsquo;s decent for most environments, but struggles a lot on bigger ones.</p><p>Because of this, we have partially replaced it with an HTTP over unix socket server that uses TCP under the hood and has no worrying size limitations.</p><p>The implementation is really simple and straightforward, and provides a less limited way of accessing the information. It has no pagination at the moment, but given that it works on prepared statements with limited information, this is not a concern.</p><h3 id=scaling-authentication-requests>Scaling authentication requests</h3><p><a href=https://github.com/wazuh/wazuh/pull/28653><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>Moving on to an issue affecting the whole cluster, we were receiving reports that authentication requests were taking too long and timing out, effectively rendering the API unusable.</p><p>The Wazuh cluster is reliant on the master node and has no alternative leader election in place. The master node holds the most updated state of the system and synchronizes it with the rest of the worker nodes.</p><p>Because of this, many requests that are handled by worker nodes are distributed to the master node, which is the only one capable of answering them, because we don&rsquo;t know for certain that the worker node has the latest state.</p><p>Authentication requests is one example, even if you have a cluster of 25 nodes, it will all come down to how fast the master node can handle the requests.</p><p>Prior to this change, the master node was using a pool with only one process to handle all authentication-related requests. This was causing delays all over the cluster because the node couldn&rsquo;t keep up with all the work it was assigned.</p><p>These were the response times of the authentication request in a cluster with 3 workers receiving 5 requests per second during one minute.</p><p><img src=/images/performance_enhancements/one_session.png alt="1 worker, 1 connection per session" title="1 worker, 1 connection per session"></p><p>To improve this, we have made configurable the number of processes dedicated to handling authentication requests and we have increased the default value to 2. That means, it can now handle requests 2x faster because it can parallelize the work.</p><p><img src=/images/performance_enhancements/10_processes.png alt="10 workers, 1 connection per session" title="10 processes, 1 connection per session"></p><blockquote><p>Note the y axis values. Bigger environments would probably benefit more if they increase it even more to 5 processes, but beyond that it&rsquo;s diminishing returns.</p></blockquote><h3 id=connection-pooling>Connection pooling</h3><p><a href=https://github.com/wazuh/wazuh/pull/28653><i class="fa-solid fa-code-pull-request"></i> Pull request</a></p><p>Another issue related to authentication requests was that they were creating a new database session for every request, instead of creating a connection pool and re-utilizing those connections.</p><p>After identifying the issue, we proceeded to fix it by creating a pool of 10 connection to the RBAC database on startup and then use available connections on every session.</p><p><img src=/images/performance_enhancements/pool.png alt="1 process, 10 connections per session" title="1 process, 10 connections per session"></p><blockquote><p>We can observe that at the start connections are being created and response times are quite high. After that, we are just re-using existing ones and the performance is much better.</p></blockquote><p>These two last changes alone</p><ol><li><a href=#scaling-authentication-requests>Authentication processes increase</a></li><li><a href=#connection-pooling>Database connection pooling</a></li></ol><p>have reduced the time taken to authenticate requests from an average of <strong>~15 seconds</strong> to just <strong>700 milliseconds</strong> (<strong>95.3333% decrease</strong>).</p><p><img src=/images/performance_enhancements/auth_requests.png alt="Authentication requests performance" title="Authentication requests performance"></p><h2 id=conclusion>Conclusion</h2><p>These changes mark a significant leap forward in Wazuh&rsquo;s performance, each addressing specific areas critical to system efficiency.</p><p>From optimizing database queries and streamlining dashboard data retrieval to implementing efficient caching mechanisms and improving agent restart operations, these changes collectively contribute to a more responsive and reliable server.</p><p>The benefits of these improvements are tangible, leading to cooler servers and lower operational costs on tens of thousands of machines running the software across the world.</p><p><img src=/images/performance_enhancements/api_endpoints.png alt="API endpoints improvements" title="API endpoints improvements"></p><p>If your instance runs quieter or your bill has seen a reduction since this version, you&rsquo;re welcome 😉.</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div id=stickySideBar class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#identifying-bottlenecks>Identifying bottlenecks</a></li><li><a href=#improving-queries>Improving queries</a></li><li><a href=#unifying-requests>Unifying requests</a></li><li><a href=#implementing-smarter-caching>Implementing smarter caching</a></li><li><a href=#reducing-time-complexity>Reducing time complexity</a></li><li><a href=#avoiding-the-bottleneck>Avoiding the bottleneck</a></li><li><a href=#database-communication-overhaul>Database communication overhaul</a></li><li><a href=#scaling-authentication-requests>Scaling authentication requests</a></li><li><a href=#connection-pooling>Connection pooling</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/python>Python</a></li><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/batching>Batching</a></li><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/connection-pooling>Connection pooling</a></li><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/caching>Caching</a></li><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/networking>Networking</a></li><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/scaling>Scaling</a></li><li class=list-inline-item><a href=https://gastonpalomeque.com/tags/sql>SQL</a></li></ul></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let stickySideBarElem=document.getElementById("stickySideBar"),stickyNavBar=!0;if(stickyNavBar){let e=document.getElementById("profileHeader"),t=e.offsetHeight+15;stickySideBarElem.style.top=t+"px"}else stickySideBarElem.style.top="50px"</script></div><footer><div class=text-center><div class="text-center pt-2"><span class=px-1><a href=https://github.com/GGP1 aria-label=github><svg width="2.7em" height="2.7em" viewBox="0 0 1792 1792"><path id="footer-socialNetworks-github-svg-path" d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5T1376 1664h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105T1386 856q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27T578 459.5 492 446q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5T484 1274q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5H416q-119 0-203.5-84.5T128 1376V416q0-119 84.5-203.5T416 128h960q119 0 203.5 84.5T1664 416z"/></svg>
</a></span><span class=px-1><a href=https://linkedin.com/in/gastonpalomeque aria-label=linkedin><svg width="2.4em" height="2.4em" fill="#fff" aria-label="LinkedIn" viewBox="0 0 512 512"><rect width="512" height="512" fill="#0077b5" rx="15%"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
</a></span><span class=px-1><a href=https://stackoverflow.com/users/12574067/ggp aria-label=stackoverflow><svg viewBox="-24 0 304 304" width="1.8em" height="1.8em" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" fill="#000"><g id="SVGRepo_bgCarrier" stroke-width="0"/><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="SVGRepo_iconCarrier"><g><polygon fill="#bcbbbb" points="216.329708 276.187929 216.329708 194.976776 243.28341 194.976776 243.28341 303.14163 0 303.14163 0 194.976776 26.9537015 194.976776 26.9537015 276.187929"/><path d="M56.7077876 187.275718 189.025959 214.929516 194.626728 188.325863 62.3085568 160.672065l-5.6007692 26.603653zm17.5024036-63.008653L196.727016 181.324901l11.201539-24.503365L85.4117295 99.4136524 74.2101912 124.267065zM108.164854 64.0587971 212.129132 150.520671l17.152355-20.652836L125.31721 43.4059609 108.164854 64.0587971zM175.374084.0l-21.70298 16.1022113L234.18216 124.617114l21.70298-16.102212L175.374084.0zM53.9074031 248.884179H189.025959V221.930478H53.9074031v26.953701z" fill="#f48023"/></g></g></svg></a></span></div><div class=py-3>Gastón Palomeque</div></div></footer><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><script src=/js/search.js></script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>